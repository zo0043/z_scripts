# Linux.do 文章助手

一个功能强大的油泼猴脚本，帮助您自动获取 Linux.do 网站的最新文章列表，根据关键词智能匹配并批量打开相关文章。

## 🚀 主要功能

### 📊 智能数据获取
- **API优先**: 优先使用 Discourse 官方 API 获取文章数据
- **DOM解析**: API 不可用时自动降级到页面解析
- **实时更新**: 支持手动刷新和自动检测新文章

### 🎯 关键词匹配
- **多关键词支持**: 可设置多个关键词进行匹配
- **匹配模式**: 支持包含匹配和精确匹配两种模式
- **智能高亮**: 自动高亮显示匹配的文章标题

### 🎛️ 配置管理
- **持久化存储**: 配置自动保存，下次使用无需重新设置
- **界面友好**: 直观的配置界面，支持实时预览
- **一键重置**: 支持快速恢复默认配置

### 📜 滚动控制
- **自动滚动**: 支持自动向下滚动浏览更多文章
- **实时匹配**: 滚动过程中实时检测和匹配新文章
- **自动打开**: 滚动时自动打开匹配的文章，保持当前窗口焦点
- **弹出提示**: 打开文章时显示1秒自动关闭的提示信息
- **速度控制**: 可自定义滚动间隔和速度

### 📚 历史记录管理
- **自动记录**: 自动记录所有打开的文章信息
- **来源区分**: 区分手动打开和滚动自动打开
- **详细信息**: 显示文章标题、作者、回复数、浏览量等
- **关键词匹配**: 显示触发打开的关键词
- **筛选查看**: 支持按来源筛选历史记录
- **批量管理**: 支持单条删除和一键清空

### 🔔 智能通知
- **匹配提醒**: 发现匹配文章时发送桌面通知
- **状态反馈**: 实时显示操作状态和统计信息
- **错误提示**: 详细的错误信息和解决建议

## 📦 安装方法

### 1. 安装油泼猴扩展
- Chrome: [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- Firefox: [Tampermonkey](https://addons.mozilla.org/firefox/addon/tampermonkey/)
- Edge: [Tampermonkey](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd)

### 2. 导入脚本
1. 下载 `linux-do-article-helper.user.js` 文件
2. 打开油泼猴管理面板
3. 点击"实用工具" → "从文件安装"
4. 选择下载的脚本文件
5. 确认安装

## 🎮 使用方法

### 基本使用
1. 访问 [https://linux.do/latest](https://linux.do/latest)
2. 点击页面右上角的 🐧 图标打开控制面板
3. 在关键词输入框中输入要匹配的关键词（每行一个）
4. 点击"刷新文章列表"获取最新文章
5. 点击"打开匹配文章"批量打开相关文章
6. 点击"历史记录"查看所有打开过的文章

### 高级功能

#### 关键词配置
```
AI
JavaScript
Python
编程
开发
```

#### 匹配模式
- **包含匹配**: 标题包含关键词即匹配（推荐）
- **精确匹配**: 标题完全等于关键词才匹配

#### 并发控制
- 设置最大同时打开的标签页数量（1-10）
- 建议设置为 3-5 个，避免浏览器卡顿

#### 滚动控制
- **开始滚动**: 自动向下滚动浏览更多文章
- **停止滚动**: 停止自动滚动
- **滚动自动打开**: 勾选后，滚动时自动打开匹配的文章
- **滚动间隔**: 控制滚动速度（毫秒）
- **滚动延时**: 滚动后的等待时间（毫秒）

**自动打开功能说明：**
- 勾选"滚动时自动打开匹配文章"复选框
- 设置关键词列表
- 点击"开始滚动"
- 系统会自动检测匹配的文章并在后台打开
- 每打开一篇文章会显示1秒的提示信息
- 当前窗口保持焦点，不会切换到新打开的标签页

#### 历史记录功能
- **查看历史**: 点击"历史记录"按钮查看所有打开过的文章
- **来源筛选**: 可筛选查看手动打开或滚动自动打开的文章
- **详细信息**: 每条记录包含文章标题、作者、回复数、浏览量、匹配关键词和打开时间
- **快捷操作**: 点击文章标题可直接在新标签页打开文章
- **记录管理**: 支持单条删除记录或一键清空所有记录
- **统计信息**: 显示总打开数、今日打开数等统计数据

## ⚙️ 配置选项

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 关键词列表 | ['AI', 'JavaScript', 'Python', '编程', '开发'] | 要匹配的关键词 |
| 匹配模式 | contains | contains 或 exact |
| 最大并发数 | 3 | 同时打开的标签页数量 |
| 滚动间隔 | 1000ms | 滚动操作的时间间隔 |
| 滚动延时 | 3000ms | 滚动后的等待时间 |
| 启用通知 | true | 是否显示桌面通知 |
| 启用高亮 | true | 是否高亮匹配文章 |
| 滚动自动打开 | false | 滚动时是否自动打开匹配文章 |

## 🔧 技术特性

### 架构设计
- **模块化**: 采用模块化设计，便于维护和扩展
- **降级机制**: API 失败时自动切换到 DOM 解析
- **错误处理**: 完善的错误捕获和用户反馈

### 性能优化
- **异步处理**: 使用 Promise 和 async/await 优化异步操作
- **防抖机制**: 避免频繁操作影响性能
- **资源管理**: 合理管理标签页和内存使用

### 兼容性
- **浏览器**: 支持 Chrome、Firefox、Edge 等主流浏览器
- **网站**: 专门适配 Linux.do (Discourse 论坛系统)
- **响应式**: 控制面板支持拖拽和自适应布局

## 🛠️ 故障排除

### 常见问题

**Q: 脚本无法正常工作？**
A: 请检查：
1. 油泼猴扩展是否正确安装
2. 脚本是否启用
3. 网站地址是否匹配

**Q: 无法获取文章列表？**
A: 可能的原因：
1. 网络连接问题
2. Linux.do 网站维护
3. API 接口变更

**Q: 打开的标签页被浏览器阻止？**
A: 解决方案：
1. 降低并发数量
2. 检查浏览器弹窗设置
3. 手动允许网站打开弹窗

**Q: 配置丢失？**
A: 配置存储在浏览器本地，清除浏览器数据会丢失配置。

### 调试方法
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 标签页的错误信息
3. 检查 Network 标签页的请求状态

## 📄 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个脚本！

## 更新日志

### v1.3.0 (2024-10-28)
- 🚫 新增防重复打开功能
- 📚 记录所有已打开文章的URL
- 🔍 智能过滤已打开过的文章
- 🗑️ 添加清空打开记录功能
- 📊 显示已打开文章数量统计
- 🛡️ 防止浏览器资源浪费
- 🔧 优化错误处理逻辑



### v1.2.0 (2024-10-28)
- 🪟 新增窗口计数限制功能 (最多10个窗口)
- 🚫 达到窗口上限时自动停止滚动
- 🔄 添加手动重置窗口计数器功能
- ⏱️ 优化打开延迟时间 (500ms→2000ms)
- 📊 实时显示窗口计数状态
- 🔧 增强的错误处理和用户反馈
- 🐛 修复关键词匹配调试信息

### v1.1.0 (2024-10-28)
- ✨ 新增历史记录功能
- 📚 自动记录所有打开的文章信息
- 🔍 支持按来源筛选历史记录
- 🗑️ 支持单条删除和批量清空
- 📊 新增统计信息显示
- 🎯 优化自动打开功能体验

### v1.0.0 (2024-10-28)
- ✨ 初始版本发布
- 🎯 基础关键词匹配功能
- 📑 标签页并发控制
- 🎛️ 配置管理界面
- 📜 自动滚动控制
- 🔔 桌面通知支持